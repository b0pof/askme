{% extends 'base.html' %}

{% block questions-list %}

  <div class="container">
    <div class="title-container">
      <p style="font-size: 30px; font-weight: 800;">{{ title }}</p>
      {% if subtitle %}
      <p style="font-size: 24px; font-weight: 600; margin-left: 40px;">
        <a href="{% url 'top-questions' %}">{{ subtitle }}</a>
      </p>
      {% endif %}
    </div>
    
    {% for question in questions %}
    <div class="question-container" style="height: 100%;">
      <div class="meta-info-row">
        <p class="question-date">{{ question.creation_date }}</p>
        <p class="question-author" style="font-weight: 700;">{{ question.author }}</p>
      </div>
  
      <div class="question-content-container" style="height: 100%;">
        <div class="avatar-block">
          <img src="../static/png/question_avatar.png" class="question-avatar" alt="Avatar">
        </div>
  
        <div class="content-column" style="height: 100%;">
  
          <div class="question-title-container">
            <p class="question-title">
              <a href="{{ question.get_url }}" style="color: black;">{{ question.title|truncatechars:40 }}</a>
            </p>
          </div>
  
          <div class="description-block" style="height: 100%;">
            <p class="question-description">{{ question.description|truncatechars:350 }}</p>
          </div>
        </div>
  
      </div>
  
      <div class="bottom-row">
        <button class="rate-button" id="like">
          <img src="../static/png/up.png" height="100%"; width="100%">
        </button>
          {% if question.rating < 0 %}
            <p class="rating-value" style="color: red;" id="rating">{{ question.rating }}</p>
          {% elif question.rating == 0 %}
            <p class="rating-value" style="color: grey;" id="rating">{{ question.rating }}</p>
          {% elif question.rating > 0 %}
            <p class="rating-value" style="color: green;" id="rating">{{ question.rating }}</p>
          {% endif %}
        <button class="rate-button" id="dislike">
          <img src="../static/png/down.png" height="100%"; width="100%">
        </button>
  
        <div class="tags-container">
          <p>Tags:<span></span></p>
          {% for tag in question.tags.all %}
            <p class="tag"><a href="{% url 'tag-search' tag %}" style="color: #444444;"><b>{{ tag }}</b></a></p>
          {% endfor %}
        </div>
      </div>
    </div>
    {% endfor %}

    <div class="pagination">
      {% if questions.has_previous %}
        <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ questions.previous_page_number }}">Previous</a>
      {% endif %}

      {% for num in questions.paginator.page_range %}
        {% if questions.number == num %}
          <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% elif num > questions.number|add:'-3' and num < questions.number|add:'3' %}
          <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if questions.has_next %}
        <a class="btn btn-outline-info mb-4" href="?page={{ questions.next_page_number }}">Next</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ questions.paginator.num_pages }}">Last</a>
      {% endif %}
    </div>
  </div>

{% endblock %}
